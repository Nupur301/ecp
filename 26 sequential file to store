Department maintains studentâ€™s database. The file contains roll number, name, division
and address. Write a program to create a sequential file to store and maintain student
data. It should allow the user to add, delete information of student. Display information
of particular student. If record of student does not exist an appropriate message is
displayed. If student record is found it should display the student details.

#include <iostream>
#include <fstream>
#include <string>

using namespace std;

struct Student {
    int rollNumber;
    string name, division, address;
};

void addStudent(const string& filename);
void deleteStudent(const string& filename);
void displayStudent(const string& filename);

int main() {
    string filename = "students.dat";
    int choice;

    do {
        cout << "\n1. Add Student\n2. Delete Student\n3. Display Student\n4. Exit\nChoose an option: ";
        cin >> choice;

        switch (choice) {
            case 1: addStudent(filename); break;
            case 2: deleteStudent(filename); break;
            case 3: displayStudent(filename); break;
            case 4: cout << "Exiting...\n"; break;
            default: cout << "Invalid choice. Try again.\n";
        }
    } while (choice != 4);

    return 0;
}

void addStudent(const string& filename) {
    Student student;
    cout << "Enter roll number, name, division, and address: ";
    cin >> student.rollNumber;
    cin.ignore();
    getline(cin, student.name);
    getline(cin, student.division);
    getline(cin, student.address);

    ofstream file(filename, ios::app);
    if (file) {
        file << student.rollNumber << "\n" << student.name << "\n" 
             << student.division << "\n" << student.address << "\n";
        cout << "Student added.\n";
    } else {
        cout << "Error opening file!\n";
    }
}

void deleteStudent(const string& filename) {
    int rollNumber;
    cout << "Enter roll number to delete: ";
    cin >> rollNumber;

    ifstream file(filename);
    ofstream tempFile("temp.dat");
    bool found = false;

    while (file >> rollNumber) {
        Student student;
        file.ignore();
        getline(file, student.name);
        getline(file, student.division);
        getline(file, student.address);

        if (student.rollNumber != rollNumber) {
            tempFile << student.rollNumber << "\n" << student.name << "\n"
                      << student.division << "\n" << student.address << "\n";
        } else {
            found = true;
        }
    }

    file.close();
    tempFile.close();
    remove(filename.c_str());
    rename("temp.dat", filename.c_str());

    cout << (found ? "Student record deleted.\n" : "No record found.\n");
}

void displayStudent(const string& filename) {
    int rollNumber;
    cout << "Enter roll number to display: ";
    cin >> rollNumber;

    ifstream file(filename);
    Student student;
    bool found = false;

    while (file >> student.rollNumber) {
        file.ignore();
        getline(file, student.name);
        getline(file, student.division);
        getline(file, student.address);

        if (student.rollNumber == rollNumber) {
            found = true;
            cout << "Roll Number: " << student.rollNumber << "\n"
                 << "Name: " << student.name << "\n"
                 << "Division: " << student.division << "\n"
                 << "Address: " << student.address << "\n";
            break;
        }
    }

    cout << (found ? "" : "No record found.\n");
}
